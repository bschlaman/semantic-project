<!DOCTYPE html>
<html>
<head>
	<!-- metas -->
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
	<meta name="author" content="Brendan Schlaman">

	<!-- css, favicon, title -->
	<link rel="stylesheet" type="text/css" href="styles.css">
	<link rel="icon" type="image/png" href="/favicon.ico" />
	<title>Sem-Comp</title>
	<script>
		window.onload = () => {
			let wordPairId;

			document.addEventListener('keydown', (e) => {
				// TODO: make keydowns simply press the buttons, and put fetch in button press event
				let semSimilarity;
				switch (e.code) {
					case "KeyA":
					case "Digit0":
					case "Numpad0": semSimilarity = 0; break;
					case "KeyS":
					case "Digit1":
					case "Numpad1": semSimilarity = 1; break;
					case "KeyD":
					case "Digit2":
					case "Numpad2": semSimilarity = 2; break;
					case "KeyF":
					case "Digit3":
					case "Numpad3": semSimilarity = 3; break;
					case "KeyG":
					case "Digit4":
					case "Numpad4": semSimilarity = 4; break;
					case "Digit5":
					case "Numpad5": semSimilarity = 5; break;
					default: return;
				}
				console.log(`assigning sem_similarity: ${semSimilarity}`);
				fetch("/put_words", {
					method: "PUT",
					headers: {
						'Content-Type': 'application/json',
					},
					body: JSON.stringify({
						id:             wordPairId,
						sem_similarity: semSimilarity,
					}),
				})
				getWords();
			});

			function getWords() {
				const word1 = document.querySelector(".words-container .word1");
				const word2 = document.querySelector(".words-container .word2");
				fetch("/get_words", { method: "GET" })
					.then(res => res.json())
					.then(data => {
						console.log(data);
						word1.innerHTML = data.word1;
						word2.innerHTML = data.word2;
						wordPairId = data.id;
					})
					.catch((err) => ("Error occured", err));
			}
			getWords();
		}
	</script>
</head>
<body><!-- workaround for FOUC --><script>let FF_FOUC_FIX;</script>
<div class="wrapper">
	<!-- div16 -->
	<div class="showcase div16">
		<h2>Word Comparison UI</h2>
		<p>The purpose of this UI snippet is to allow a user to compare two words, and click buttons 0 through 4 to rate their semantic similarity.</p>
		<div class="word-comp-wrapper">
			<h3>Semantic Comparator</h3>
			<div class="words-container">
				<p class="word1">Loading...</p>
				<p class="separator">&#8901;</p>
				<p class="word2">Loading...</p>
			</div>
			<div class="buttons-container">
				<button class="button0">0</button>
				<button class="button1">1</button>
				<button class="button2">2</button>
				<button class="button3">3</button>
				<button class="button4">4</button>
			</div>
		</div>
	</div>

<!-- end of wrapper div -->
</div>
</body>
</html>
